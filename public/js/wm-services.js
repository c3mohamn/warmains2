!function(t,e,r){"use strict";wmApp.service("charHelper",["$http",function(t){return{classes:{1:"Warrior",2:"Paladin",3:"Hunter",4:"Rogue",5:"Priest",6:"Deathknight",7:"Shaman",8:"Mage",9:"Warlock",11:"Druid"},specs:{1:["arms","fury","protection"],2:["holy","protection","retribution"],3:["beastmastery","marksmanship","survival"],4:["assassination","combat","subtlety"],5:["discipline","holy","shadow"],6:["blood","frost","unholy"],7:["elemental","enhancement","restoration"],8:["arcane","fire","frost"],9:["affliction","demonology","destruction"],11:["balance","feral","restoration"]},inventorySlots:{0:"Ammo",1:"Head",2:"Neck",3:"Shoulder",4:"Shirt",5:"Chest",6:"Waist",7:"Legs",8:"Feet",9:"Wrist",10:"Hands",11:"Finger1",12:"Finger2",13:"Trinket1",14:"Trinket2",15:"Back",16:"MainHand",17:"OffHand",18:"Ranged",19:"Tabard",20:"Finger",21:"Trinket",22:"OneHand",23:"TwoHand"},itemTypes:{0:"None",1:"Cloth",2:"Leather",3:"Mail",4:"Plate",5:"Shield",6:"OneHandAxe",7:"TwoHandAxe",8:"OneHandSword",9:"TwoHandSword",10:"OneHandMace",11:"TwoHandSword",12:"Polearm",13:"Staff",14:"Dagger",15:"FistWeapon",16:"Bow",17:"Crossbow",18:"Gun",19:"Thrown"},itemBinds:{1:"BoE",2:"BoP",3:"BoA"}}}]),wmApp.service("talentHelper",["$http",function(t){function e(t,e){var r=0,n=t-1;if(-1==n)return e[0];for(;n>=0;)r+=e[n],n-=1;return r}return{talentPointsDetails:{0:{total:0,lastActiveRow:0,row:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0}},1:{total:0,lastActiveRow:0,row:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0}},2:{total:0,lastActiveRow:0,row:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0}},remaining:71},addPoint:function(t,e,r,n,o){var a=o[e].row,i=o[e].tree,s=n[i].total,l=n[i].lastActiveRow;return!(0==t||s<5*a||n.remaining<=0||r[e]+t>o[e].max_rank||o[e].requires&&r[o[e].requires]!=o[o[e].requires].max_rank||(r[e]+=t,n[i].row[a]+=t,n[i].total+=t,n.remaining-=t,l<a&&(n[i].lastActiveRow=a),0))},removePoint:function(t,r,n,o){var a=o[t].row,i=o[t].tree,s=n[i].lastActiveRow;if(r[t]<=0)return!1;if(o[t].allows)for(l=0;l<o[t].allows.length;l+=1)if(r[o[t].allows[l]]>0)return!1;if(a!=s)for(var l=0;s-l>a;){if(e(s-l,n[i].row)<=5*(s-l))return!1;l+=1}return r[t]-=1,n[i].row[a]-=1,n[i].total-=1,n.remaining+=1,a==s&&0==n[i].row[a]&&(n[i].lastActiveRow-=1),!0},clearTalents:function(t,e,r){e.remaining=71,e[0].total=0,e[1].total=0,e[2].total=0,e[0].lastActiveRow=0,e[1].lastActiveRow=0,e[2].lastActiveRow=0,e[0].row={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},e[1].row={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},e[2].row={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0};for(var n in all_talents[r])t[n]=0;return!0},generateUrl:function(t){var e=[];for(var r in t)e.push(t[r]);return e.join("")},getTalentImgPath:function(t,e,r){return t?"/images/talents/"+e+"/"+r+"/"+t+".jpg":""},getTalentTooltip:function(){},getClassTooltipDescriptions:function(e){return t.get("/js/variables/talent-tooltips/"+e+".json")}}}]),wmApp.service("authAPI",["$http","$localStorage","$window",function(t,e,r){return{registerUser:function(e,r){return t.post("/auth/register",{username:e,password:r})},loginUser:function(e,r){return t.post("/auth/login",{username:e,password:r})},logout:function(){delete e.currentUser,r.location.reload()},decryptToken:function(t){var e=t.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(r.atob(e))},refreshToken:function(e){return t.post("/auth/refreshToken",{token:e})}}}])}(window,document);