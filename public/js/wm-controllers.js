!function(e,s,t){"use strict";wmApp.controller("authCtrl",["$scope","$http","$state","authAPI","$localStorage",function(e,s,t,n,l){function a(){return o(),0===e.auth.username.length?(e.usernameError="Please enter a usename.",!1):e.auth.username.length<3?(e.usernameError="Username must be greater than 3 characters long.",!1):0===e.auth.pass.length?(e.passError="Please enter a password.",!1):e.auth.pass.length<5?(e.passError="Password must be greater than 6 characters long.",!1):e.auth.confirmPass===e.auth.pass||(e.confirmPassError="Passwords must match.",!1)}function r(){return o(),0===e.auth.username.length?(e.usernameError="Please enter your username.",!1):0===e.auth.pass.length?(e.passError="Please enter your password.",!1):void 0}function o(){e.usernameError=null,e.passError=null,e.confirmPassError=null,e.serverError=null,e.serverSuccess=null}e.registerUser=function(){if(e.registeringUser=!0,!a())return e.registeringUser=!1,!1;console.log("Attempting to register user..."),n.registerUser(e.auth.username,e.auth.pass).then(function(s){console.log(s),e.serverSuccess=s.data,e.registeringUser=!1},function(s){console.log(s),e.serverError=s.data,e.registeringUser=!1}),e.registeringUser=!1},e.loginUser=function(){e.loggingUser=!0,r(),n.loginUser(e.auth.username,e.auth.pass).then(function(s){console.log(s),l.currentUser=s.data,e.loggingUser=!1,t.go("home")},function(s){console.log(s),e.serverError=s.data,e.loggingUser=!1}),e.loggingUser=!1},e.auth={username:"",pass:"",confirmPass:""}}]),wmApp.controller("homeCtrl",["$rootScope","$localStorage","$scope",function(e,s,t){console.log("homeCtrl: ",e.currentUser)}]),wmApp.controller("indexCtrl",["$rootScope","$scope","$state","authAPI",function(e,s,t,n){s.logout=function(){n.logout()},s.$state=t}]),wmApp.controller("modalSaveTalentCtrl",["$scope","close","$location",function(e,s,t){function n(){return e.name?!(e.name.length<2||e.name.length>20)||(e.nameError="Name must be between 2 and 20 characters long.",!1):(e.nameError="Enter a name please.",!1)}e.name=null,e.closeModal=function(){e.destroying=!0,s(!1,250)},e.save=function(){!0===n()&&(e.destroying=!0,s({talents:t.search().talents,glyphs:t.search().glyphs,name:e.name},250))}}]),wmApp.controller("plannerCtrl",["$scope","$state",function(e,s){e.test="test"}]),wmApp.controller("stylesCtrl",["$scope",function(e){}]),wmApp.controller("talentCalcCtrl",["$rootScope","$scope","talentHelper","$stateParams","$state","talentDetails","talentTooltips","talentGlyphs","ModalService",function(e,s,t,n,l,a,r,o,c){function p(e){t.clearTalents(s.talentsSpent,s.talentsSpentDetails,s.classId,a,e)}function u(){s.curGlyphs=t.clearGlyphs(s.curGlyphs)}s.classes=classesToString,s.specs=specsToString,s.urlTalents=t.getUrlTalents(),s.urlGlyphs=t.getUrlGlyphs(),s.classId=n.class,s.talentDetails=a,s.talentTooltips=r,s.talentsSpentDetails={},s.talentsSpent={},s.talentGlyphs=o,s.curGlyphs={},e.showGlyphSelection=!1,s.changeClass=function(e){l.go("talent-calculator",{class:e,talents:"",glyphs:""})},s.validClassId=function(){return!(""===s.classId||!s.classId||!s.classes[s.classId])},s.clearTalents=p,s.clearGlyphs=u,s.showGlyphSelectionModal=function(t,n){e.showGlyphSelection=!0,s.glyphSelectionType=n,s.glyphSelectionIndex=t,e.isModalOpen=!0},s.getGlyphTooltip=function(e,s){return t.getGlyphTooltip(e,s,t.getGlyphImgPath(e))},s.goToSavedTalent=function(e){l.go("talent-calculator",{class:e.classId,talents:e.talents,glyphs:e.glyphs},{reload:!0})},s.showSavedTalents=function(){if(!e.currentUser)return!1;c.showModal(i).then(function(e){e.close.then(function(e){console.log("confirmed no value",e)})})},s.savedTalents=[{name:"Hunter MM",classId:3,talents:"I27W",glyphs:"2",preview:[0,0,2]},{name:"Some war spec",classId:1,talents:"rbI14qI13c",glyphs:"7:2",preview:[8,5,3]},{name:"Holy pala Dsac",classId:2,talents:"a",glyphs:"1:2:3",preview:[1,0,0]},{name:"Idk",classId:3,talents:"a",glyphs:"1:2:3",preview:[1,0,0]},{name:"fok",classId:4,talents:"a",glyphs:"1:2:3",preview:[1,0,0]},{name:"dang man",classId:5,talents:"a",glyphs:"1:2:3",preview:[1,0,0]},{name:"something something really long name here",classId:6,talents:"a",glyphs:"1:2:3",preview:[1,0,0]},{name:"beep",classId:7,talents:"a",glyphs:"1:2:3",preview:[1,0,0]},{name:"Boop",classId:8,talents:"a",glyphs:"1:2:3",preview:[1,0,0]}];var i={templateUrl:"/partials/wm-modal-save-talent.html",bodyClass:"modal-open",controller:"modalSaveTalentCtrl"};s.classId&&(p(),u(),s.urlTalents&&t.initTalents(a,s.urlTalents,s.talentsSpent,s.talentsSpentDetails),s.urlGlyphs&&t.initGlyphs(s.urlGlyphs,s.curGlyphs,s.talentGlyphs))}])}(window,document);