!function(t,e,n){"use strict";wmApp.directive("ngRightClick",["$parse",function(t){return function(e,n,i){var o=t(i.ngRightClick);n.bind("contextmenu",function(t){e.$apply(function(){t.preventDefault(),o(e,{$event:t})})})}}]),wmApp.directive("wmTalent",["$rootScope","talentHelper","$location",function(t,e,n){return{restrict:"E",scope:{classId:"@",col:"@",row:"@",tree:"@",talentPoints:"=",talentPointsDetails:"=",talentTooltips:"=",talentDetails:"="},templateUrl:"/partials/wm-talent.html",link:function(t,i,o){function l(n){return e.isTalentInactive(n,t.talentDetails,t.talentPoints,t.talentPointsDetails)}function s(){return e.getTalentImgPath(t.talentId,t.classId,t.specs[t.classId][t.tree])}function a(){t.tooltip=e.getTalentTooltip(t.talentId,t.talent,t.talentPoints,s(),t.talentTooltipDescriptions,l(t.talentId))}function c(i){i&&(a(),n.search("talents",e.generateUrl(t.talentPoints)))}t.specs=specsToString,t.isInactive=l,t.talentImgPath=s,t.addPoint=function(){c(e.addPoint(1,t.talentId,t.talentPoints,t.talentPointsDetails,t.talentDetails))},t.removePoint=function(){c(e.removePoint(t.talentId,t.talentPoints,t.talentPointsDetails,t.talentDetails))},t.isInactive=l,function(){for(var e in t.talentDetails)if(t.talentDetails[e].row==t.row&&t.talentDetails[e].col==t.col&&t.talentDetails[e].tree==t.tree)return t.talent=t.talentDetails[e],t.talentId=e,t.talentTooltipDescriptions=t.talentTooltips[e],a(),!0}()}}}]),wmApp.directive("wmTooltip",["$compile","$document","$sce","$window","$timeout",function(t,e,n,i,o){return{restrict:"A",scope:{position:"@",content:"@",contentHtml:"=",hideTooltip:"@"},link:function(l,s,a){function c(){var t=s[0].getBoundingClientRect(),e=p[0].getBoundingClientRect(),n=t.width,o=t.height,l=e.width,a=e.height,c=(i.scrollX,i.scrollY);switch(r){case"top-middle":p.css("left",t.left-l/2+n/2+"px"),p.css("top",c+t.top-a-20+"px");break;case"left-middle":p.css("left",t.left-l-20+"px"),p.css("top",c+t.top-a/2+o/2+"px");break;case"right-middle":p.css("left",t.right+20+"px"),p.css("top",c+t.top-a/2+o/2+"px");break;default:p.css("left",t.left-l/2+n/2+"px"),p.css("top",c+t.bottom+20+"px")}}l.trustedHtml=function(t){return n.trustAsHtml(t)};var r=l.position||"top-middle",p=t("<div class='wm-tooltip' ng-bind-html='trustedHtml(contentHtml) || content'></div>")(l);e.find("body").append(p),s.on("mouseenter",function(){l.hideTooltip||(c(),p.css("visibility","visible"))}),s.on("mouseleave",function(){p.css("visibility","hidden")}),s.on("mouseup",function(){o(function(){c()})}),s.on("$destroy",function(){l.$destroy()}),l.$on("$destroy",function(){p.remove()})}}}])}(window,document);