!function(t,e,n){"use strict";wmApp.directive("ngRightClick",["$parse",function(t){return function(e,n,i){var o=t(i.ngRightClick);n.bind("contextmenu",function(t){e.$apply(function(){t.preventDefault(),o(e,{$event:t})})})}}]),wmApp.directive("wmTalent",["$rootScope","charHelper","talentHelper","$location",function(t,e,n,i){return{restrict:"E",scope:{classId:"@",col:"@",row:"@",tree:"@",talents:"=",details:"="},templateUrl:"/partials/wm-talent.html",link:function(t,o,l){function s(){var e=t.talentTooltipDescriptions[t.talents[t.talentId]];t.tooltip="<h4>"+t.talent.name+"</h4><div class='tooltip-description'>"+e+"</div>"}var c=all_talents[t.classId];t.specs=e.specs,t.talentImgPath=function(){return n.getTalentImgPath(t.talentId,t.classId,t.specs[t.classId][t.tree])},t.addPoint=function(){var e=n.addPoint(1,t.talentId,t.talents,t.details,c);console.log(t.talentId,t.talents,t.details),e&&(s(),i.search("talents",n.generateUrl(t.talents)))},t.removePoint=function(){var e=n.removePoint(t.talentId,t.talents,t.details,c);console.log(t.talentId,t.talents,t.details),e&&(s(),i.search("talents",n.generateUrl(t.talents)))},function(){for(var e in c)if(c[e].row==t.row&&c[e].col==t.col&&c[e].tree==t.tree)return t.talent=c[e],t.talentId=e,n.getClassTooltipDescriptions(t.classId).then(function(e){e&&(t.talentTooltipDescriptions=e.data[t.talentId],s())}),!0}()}}}]),wmApp.directive("wmTooltip",["$compile","$document","$sce",function(t,e,n){return{restrict:"A",scope:{position:"@",content:"@",contentHtml:"=",hideTooltip:"@"},link:function(i,o,l){i.trustedHtml=function(t){return n.trustAsHtml(t)};var s=i.position||"top-middle",c=t("<div class='wm-tooltip' ng-bind-html='trustedHtml(contentHtml) || content'></div>")(i);e.find("body").append(c),i.hideTooltip||o.bind("mouseenter",function(){var t=o[0].getBoundingClientRect(),e=c[0].getBoundingClientRect(),n=t.width,i=t.height,l=e.width,a=e.height;switch(s){case"top-middle":c.css("left",t.left-l/2+n/2+"px"),c.css("top",t.top-a-10+"px");break;case"left-middle":c.css("left",t.left-l-10+"px"),c.css("top",t.top-a/2+i/2+"px");break;case"right-middle":c.css("left",t.right+10+"px"),c.css("top",t.top-a/2+i/2+"px");break;default:c.css("left",t.left-l/2+n/2+"px"),c.css("top",t.bottom+10+"px")}c.css("visibility","visible")}),o.bind("mouseleave",function(){c.css("visibility","hidden")}),o.on("$destroy",function(){i.$destroy()}),i.$on("$destroy",function(){c.remove()})}}}])}(window,document);